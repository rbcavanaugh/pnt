---
title: "Philadelphia Naming Test: Computer Adaptive Test Results"
output: pdf_document
urlcolor: blue
params:
  notes: NA
  values: NA
  irt_final: NA
  text: NA
  caption: NA
  download_time: NA
  version: NA
header-includes:
    - \usepackage{booktabs}
    - \usepackage{tabu}
    - \usepackage{longtable}
    - \usepackage{float}
    - \usepackage[default]{sourcesanspro}
    - \usepackage[T1]{fontenc}
---

```{r global_options, include=FALSE}
knitr::opts_chunk$set(fig.pos = 'H')
#options(knitr.kable.NA = '-')
shiny::setProgress(0.1)
```

### Summary

`r params$text` 

<br>

```{r, echo=F, fig.height=3, fig.width=5, warning = F, fig.align='center'}
plot <- pnt::get_plot(params$irt_final, basesize = 10, line_weight = 1)
shiny::setProgress(0.4)
plot
shiny::setProgress(0.7)

```

*`r params$caption`*

### Administration notes 

```{r, include = F}
# some wranlging:
tests = tibble::tribble(
            ~name, ~variable,
            "30-item Computer Adaptive PNT" , "30_cat",
            "175-item Computer Adaptive PNT" , "175_cat",
            "Variable length Computer Adaptive PNT" , "SEM",
            "30-item PNT Short form (Walker)" , "30_walker",
            "175-item Standard PNT" , "175_standard",
            "Offline PNT", "offline") 
tests <- subset(tests, variable==params$values$selected_test)$name

if(tests == "30-item PNT Short form (Walker)"){
  tests = paste0(tests, "; ", "Form ",params$values$walker_form)
}

rescore_text = paste0("The test was rescored on ", format(Sys.time(), format="%B %d %Y %R %Z"), ". ")
score_text = paste0("The test was scored on ", format(Sys.time(), format="%B %d %Y %R %Z"), ". ")
completed_text = paste0(
  "This test was completed on",
  format(params$values$end_time, format="%B %d %Y"),
  ".  Test administration began at ",
  format(params$values$start_time, format="%R %Z"),
  " and was completed at ",
  format(params$values$end_time, format="%R %Z"),
  ". " )
end_text = "A description of this version of the PNT can be found here: https://rbcavanaugh.github.io/pnt/articles/articles/PNT-Versions.html. "

if(params$values$selected_test=="offline"){
  print_txt = score_text
} else if (!is.null(params$values$rescore)){
  print_txt = paste0(rescore_text, completed_text, end_text)
} else {
  print_txt = paste0(completed_text, end_text)
}

```

The PNT test version administered was *`r tests`.*  `r print_txt` 

`r if(params$notes!="NA"){params$notes}`

```{r, echo = F}
shiny::setProgress(0.8)
```

### About this report

This report was downloaded on `r format(params$download_time, format="%B %d %Y %R %Z")` and generated by the pnt-cat shiny web app located at https://william-hula.shinyapps.io/pnt-cat/. This web-app is open source and the source code is located at https://github.com/rbcavanaugh/pnt. Comments, feedback, and bug-reports can be made on the github page. 



```{r, echo = FALSE, results = 'asis'}
print(citation("pnt"), bibtex = FALSE)
```


```{r, echo = F}
shiny::setProgress(0.9)
```

### References

Fergadiotis, G., Casilio, M., Hula, W. D., & Swiderski, A. M. (2021). Computer adaptive testing for the assessment of anomia severity. Seminars in Speech and Language. Available at: https://psuaphasialab.wixsite.com/psuaphasialab/publications

Roach, A., Schwartz, M. F., Martin, N., Grewal, R. S., & Brecher, A. (1996). The Philadelphia naming test: scoring and rationale. Clinical aphasiology, 24, 121-133.

https://mrri.org/philadelphia-naming-test/
